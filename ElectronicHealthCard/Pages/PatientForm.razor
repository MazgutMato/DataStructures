@page "/patientForm"
@inject PatientsController patientController
@inject NavigationManager navigatorManager

<EditForm Model="@Patient">
    <h3>Add Patient</h3>
    <hr />
    <div class="form-group">
        <label for="firstName">
            First Name
        </label>
        <div>
            <InputText id="firstName" class="form-control" placeholder="First Name"
                       @bind-Value="Patient.FirstName" />
        </div>
    </div>
    <div class="form-group row">
        <label for="lastName">
            Last Name
        </label>
        <div>
            <InputText id="lastName" class="form-control" placeholder="Last Name"
                       @bind-Value="Patient.LastName" />
        </div>
    </div>
    <div class="form-group row">
        <label for="patientId">
            PatientID
        </label>
        <div>
            <InputText id="patientId" class="form-control" placeholder="Patient Id"
                       @bind-Value="Patient.PatientId" />
        </div>
    </div>
    <div class="form-group row">
        <label for="birthDate">
            Birth Date
        </label>
        <div>
            <InputDate id="birthDate" class="form-control" placeholder="Birth Date"
                       @bind-Value="Patient.BirthDate" />
        </div>
    </div>
    <div>
        <button class="btn btn-primary" @onclick="@(() => {
                if(patientController.AddPatient(this.Patient)){
                    Message = "Successfuly added!";
                } else {
                    Message = "Patient already exists!";
                }               
            })">Add</button>
    </div>
     @if(Message != null){
        <p>@Message</p>
     }
</EditForm>

@code {
    public Patient Patient { get; set; } = new Patient();
    public string Message { get; set; } = null;
}
